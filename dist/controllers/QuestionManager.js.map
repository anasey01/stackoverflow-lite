{"version":3,"sources":["../../controllers/QuestionManager.js"],"names":["QuestionManager","connection","conn","table","answerTable","userId","questionTitle","questionContent","callback","insertQuestion","err","result","selectById","res","selectQuestions","questionId","selectByQuestionId","selectQuestionByUserId","error","answer","insertAnswer","getAnswer","answerId","selectOneAnswer","selectAnswer","updateMarkedAnswer","updateQuestionAnswer","currentVote","otherVote","insertVotes","deleteQuestionById"],"mappings":"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","file":"QuestionManager.js","sourcesContent":["\nclass QuestionManager {\n  constructor(connection) {\n    this.conn = connection;\n    this.table = 'questions';\n    this.answerTable = 'answers';\n  }\n\n  createQuestion(userId, questionTitle, questionContent, callback) {\n    this.conn.insertQuestion(userId, questionTitle, questionContent, (err, result) => {\n      if (err) {\n        callback('error');\n      }\n      this.conn.selectById(this.table, userId, (res, err) => {\n        if (err) {\n          callback(err);\n        } else {\n          callback(res);\n        }\n      });\n    });\n  }\n\n  getAllQuestion(callback) {\n    this.conn.selectQuestions((result, err) => {\n      if (err) {\n        callback('There was an error retrieving questions');\n      }\n      callback(result);\n    });\n  }\n\n  getQuestion(questionId, callback) {\n    this.conn.selectByQuestionId(this.table, questionId, (result, err) => {\n      if (err) {\n        callback(err);\n      }\n      callback(result);\n    });\n  }\n\n  getUserQuestions(userId, callback) {\n    this.conn.selectQuestionByUserId(userId, (error, result) => {\n      callback(error, result);\n    });\n  }\n\n  createAnswer(userId, questionId, answer, callback) {\n    this.conn.insertAnswer(userId, questionId, answer, (err, result) => {\n      if (err) {\n        callback(err);\n      }\n      this.getAnswer(questionId, (result, err) => {\n        callback(result);\n      });\n    });\n  }\n\n  getSpecificAnswer(questionId, answerId, callback) {\n    this.conn.selectOneAnswer(questionId, answerId, (result, err) => {\n      callback(result, err);\n    });\n  }\n\n  getAnswer(questionId, callback) {\n    this.conn.selectAnswer(this.answerTable, questionId, (err, result) => {\n      callback(result, err);\n    });\n  }\n\n  markAnswer(answerId, callback) {\n    this.conn.updateMarkedAnswer(answerId, (err, result) => {\n      if (err) {\n        callback('error');\n      }\n      callback('successfully marked');\n    });\n  }\n\n  updateAnswer(answerId, answer, callback) {\n    this.conn.updateQuestionAnswer(answerId, answer, (err, result) => {\n      if (err) {\n        callback('error');\n      }\n      callback('answer updated');\n    });\n  }\n\n  createVotes(questionId, answerId, userId, currentVote, otherVote, callback) {\n    this.conn.insertVotes(questionId, answerId, userId, currentVote, otherVote, (err, result) => {\n      callback(err, result);\n    });\n  }\n\n  deleteOne(questionId, callback) {\n    this.conn.deleteQuestionById(this.table, questionId, (result, err) => {\n      callback(result, err);\n    });\n  }\n}\n\nexport default QuestionManager;\n"]}