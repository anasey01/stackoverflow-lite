{"version":3,"sources":["../server.js"],"names":["app","use","bodyParser","urlencoded","extended","json","express","static","path","resolve","__dirname","get","req","res","sendFile","authRouter","voteRoute","commentRoute","questionRoute","next","error","Error","status","success","message","set","process","env","PORT","listen","console","log"],"mappings":"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","file":"server.js","sourcesContent":["import expressValidator from 'express-validator';\r\nimport express from 'express';\r\nimport morgan from 'morgan';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport bodyParser from 'body-parser';\r\nimport authRouter from './routes/authRoute';\r\nimport voteRoute from './routes/votesRoute';\r\nimport commentRoute from './routes/commentRoute';\r\nimport questionRoute from './routes/questionRoute';\r\n\r\nconst app = express();\r\n\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\napp.use(expressValidator());\r\napp.use(cors());\r\napp.use(express.static(path.resolve(__dirname, './../UI/')));\r\napp.use('/UI', express.static(path.resolve(__dirname, './../UI/')));\r\napp.use('/questions/:questionId/UI', express.static(path.resolve(__dirname, './../UI/')));\r\napp.use('/questions/:questionId/answers/UI', express.static(path.resolve(__dirname, './../UI/')));\r\n\r\napp.get('/', (req, res) => res.sendFile(path.resolve(__dirname, './../UI/index.html')));\r\napp.get('/search', (req, res) => res.sendFile(path.resolve(__dirname, './../UI/search.html')));\r\napp.get('/questions/:questionId', (req, res) => res.sendFile(path.resolve(__dirname, './../UI/viewQuestion.html')));\r\napp.get('/questions/:questionId/answers/:answerId', (req, res) => res.sendFile(path.resolve(__dirname, './../UI/updateAnswer.html')));\r\napp.get('/questions/:questionId/answers/:answerId/comment', (req, res) => res.sendFile(path.resolve(__dirname, './../UI/addcomment.html')));\r\n// app.get('*', (req, res) => path.resolve(__dirname, './../UI/404.html'));\r\n\r\napp.use('/api/v1/auth/', authRouter);\r\napp.use('/api/v1', voteRoute);\r\napp.use('/api/v1', commentRoute);\r\napp.use('/api/v1', questionRoute);\r\napp.use(morgan(':method :url :response-time'));\r\n\r\napp.use((req, res, next) => {\r\n  const error = new Error('Not found');\r\n  error.status = 404;\r\n  next(error);\r\n});\r\n\r\napp.use((error, req, res, next) => {\r\n  res.status(error.status || 500);\r\n  res.json({\r\n    success: false,\r\n    error: {\r\n      message: error.message,\r\n    },\r\n  });\r\n});\r\n\r\napp.set('port', process.env.PORT || 8080);\r\n\r\napp.listen(app.get('port'), () => {\r\n  // eslint-disable-next-line no-console\r\n  console.log(`Action happening on port ${app.get('port')}`);\r\n});\r\n\r\nexport default app;\r\n"]}